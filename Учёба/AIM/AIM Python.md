# OZON::Python

#python #ozon #prog #course  | [[Python]] [[Ozon]] [[Course]] [[Prog]]

---

## Content

^988180

1) [[AIM Python#^344e11|Venv]]
2) [[AIM Python#^8c4e67|–ê—Ä–≥—É–º–µ–Ω—Ç—ã]]
3) [[AIM Python#^578e7e|Packing]]
4) [[AIM Python#^53b053|Iterable protocol]]
5) [[AIM Python#^da519c|Generator]]
6) [[AIM Python#^361826|–ü—Ä–æ–≤–µ—Ä–∫–∞]]
7) [[AIM Python#Ozon Python2 988180 –õ–µ–Ω–∏–≤—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã|–õ–µ–Ω–∏–≤—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã]]
8) [[AIM Python#Ozon Python2 Content Context Manager|Context manager]]
9) [[AIM Python#Ozon Python2 Content Testing|Testing]]
10) [[AIM Python#Ozon Python2 Content Decorator|Decorator]]

---
&nbsp;
## [[AIM Python#^988180|Venv]]

^344e11

–ú—ã –Ω–µ –º–æ–∂–µ–º —Å—Ç–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏—è –ø–∞–∫–µ—Ç–æ–≤, –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏–ª–∏—â –ø–∞–∫–µ—Ç–æ–≤ - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–µ–ª–∞–µ—Ç—Å—è —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é `venv` (–µ—Å—Ç—å –≤ std –ø–∏—Ç–æ–Ω–∞)
```python
$ python3 -m venv <path> # –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
$ source <path>/bin/activate # 
```
> - `activate`  –¥–æ–±–∞–≤–ª—è–µ—Ç `<path>` –≤ `PATH`
> - `bin` —Ö—Ä–∞–Ω–∏—Ç –±–∏–Ω–∞—Ä–∏ –ø–∏—Ç–æ–Ω–∞

–ö–æ–º–∞–Ω–¥–æ–π `which` –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∏—Ç–æ–Ω–∞ —É –Ω–∞—Å –µ—Å—Ç—å:
```python
$ which -a python3
```

–í `PATH` –ª–µ–∂–∏—Ç –Ω–∞–±–æ—Ä –∏ –ø–æ—Ä—è–¥–æ–∫ –ø–∞–ø–æ–∫, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –∏—â–µ–º –±–∏–Ω–∞—Ä–∏
```Python
echo $PATH
```

–í –Ω–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –±—É–¥–µ—Ç pip –∏ python –∏ –±–æ–ª—å—à–µ, –ø–æ —Å—É—Ç–∏, –Ω–∏—á–µ–≥–æ

---

–ù–æ –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ —á—Ç–æ–±—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `python3` –º—ã –æ–±—Ä–∞—â–∞–ª–∏—Å—å –Ω–µ –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –ø–∏—Ç–æ–Ω—É, –∞ –∫ –Ω–æ–≤–æ–º—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –æ–∫—Ä—É–∂–µ–Ω–∏—é? –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å –µ–≥–æ –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ
```python
source <path>/bin/activate
```
> - `source` –∏—Å–ø–æ–ª–Ω—è–µ—Ç –≤–µ—Å—å –¥–≤–∏–∂ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–Ω—Å–æ–ª–∏ –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–¥–µ—Å—å (–ø–æ—ç—Ç–æ–º—É –±–µ–∑ –Ω–µ–≥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤ –¥—Ä—É–≥–æ–π, –≤—ã–∑–≤–∞–Ω–Ω–æ–π —Å–∫—Ä–∏–ø—Ç–æ–º –∫–æ–Ω—Å–æ–ª–∏)
> 
> - –ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–º–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `deacticate`

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ `PATH` –±–∏–Ω–∞—Ä—å –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–æ–Ω–∞ —Å—Ç–æ–∏—Ç –≤—ã—à–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ. –≤—ã–∑–æ–≤ `python3` –∏ `pip3` –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π

### –ò—Ç–æ–≥–æ
- –í—Å–µ–≥–¥–∞ –µ—Å—Ç—å ‚úî
- –ü—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π ‚úî
- –ù–µ –º—É—Å–æ—Ä–∏—Ç –≤ —Ñ–∞–π–ª–∞—Ö ‚úî
- –ù–µ –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤, –ª–∏—à—å –∏–∑–æ–ª–∏—Ä—É–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ ‚ùó
- –ú–æ–∂–Ω–æ –≤–∑–æ—Ä–≤–∞—Ç—å –µ—Å–ª–∏ –¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ `activate` ‚ùó

---
&nbsp;
## [[AIM Python#^988180|–ê—Ä–≥—É–º–µ–Ω—Ç—ã]]

^8c4e67

–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–∏ –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏), –º–æ–∂–Ω–æ –≤–æ—Å–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `locals()`

–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å, –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–ª—É—á–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã:
```Python
def named_func(*, a, b, default = 3)# –ø–æ—Å–ª–µ * –∏–¥—É—Ç —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (—Å–ª–µ–≤–∞ –∫–∞–∫ —É–≥–æ–¥–Ω–æ)
```
> - –û–±—ã—á–Ω–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, –∏ –¥–ª—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –æ–± –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ - –Ω–æ–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω —Ç–æ–ª—å–∫–æ –ø–æ —è–≤–Ω–æ–º—É –∏–º–µ–Ω–∏, –µ—Å–ª–∏ –æ–Ω –∏–¥—ë—Ç –ø–æ—Å–ª–µ *
> 
> - –ß—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –µ—â–µ –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º

```Python
def pos_func(a, /) # –∞—Ä–≥—É–º–µ–Ω—Ç –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ
```
> - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞ —Å–æ–±–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–º–µ–Ω—è—Ç—å –∏–º—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞ - –æ–Ω–æ –Ω–∏–≥–¥–µ –Ω–µ —Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç. –ù–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–¥–æ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º —á—Ç–æ –æ–Ω–æ –Ω–∞–º –Ω–∞–¥–æ.

---
&nbsp;
## [[AIM Python#^988180|Packing]]

^578e7e

 –î–æ–ø—É—Å—Ç–∏–º —É –Ω–∞—Å –µ—Å—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä–æ–º—É –¥–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –º—ã —Ö–æ—Ç–∏–º –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```python
def wrapper(<parameters>):
	func(<parameters>) 
```

–í–º–µ—Å—Ç–æ `<parameters>` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `args, kwargs`
```Python
def wrapper(*args, **kwargs):
```
> - `args` - —ç—Ç–æ –∫–æ—Ä—Ç–µ–∂ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
> - `kwargs` - —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å –∏–º–µ–Ω–æ–≤–∞–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ç–∏–ø–∞ {–∏–º—è : –∑–Ω–∞—á–µ–Ω–∏–µ}

–ù—å—é–∞–Ω—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º: –µ—Å–ª–∏ –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –≤—Ö–æ–¥ –ø–æ–¥–∞—é—Ç—Å—è `args, kwargs` –∏ –æ–Ω–∞ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Ö –¥—Ä—É–≥–æ–π —Ñ—É–∫–Ω–∫—Ü–∏–∏, –µ—ë –Ω–∞–±–æ—Ä `args, kwargs` –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
```Python
def func(*args, **kwargs):
	print("func", locals())
	
def wrapper(*args, **kwargs):
	func(args, kwargs)
	
wrapper(1,2,3, named = "blabla")
```
> - –£ —Ñ—É–Ω–∫—Ü–∏–∏ `wrapper` : `args` == (1,2,3) `kwargs` == {named : "blabla"}
> - –£ —Ñ—É–Ω–∫—Ü–∏–∏ `func` : `args` == ((1,2,3), {named : "blabla"}) `kwargs` == {} 

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–∏—Ç–æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–∞–∫ –æ–¥–∏–Ω –Ω–∞–±–æ—Ä –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
```Python
def func(*args, **kwargs):
	print("func", locals())
	
def wrapper(*args, **kwargs):
	func(*args, **kwargs) # –≤—Å—ë –ø–µ—Ä–µ–¥–∞—Å—Ç—Å—è –∫—É–¥–∞ –Ω–∞–¥–æ
	
wrapper(1,2,3, named = "blabla")
```
> - –ü–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã */** –∑–∞–Ω–∏–º–∞—é—Ç—Å—è –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–æ–π, –∏ –∑–∞–ø–∞–∫–æ–≤–∫–æ–π - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ 

---

 –ê —á—Ç–æ –µ—Å–ª–∏ –∫—Ä–æ–º–µ `args` –∏ `kwargs` –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã?
 
–ü–∏—Ç–æ–Ω —É–º–Ω—ã–π –∏ —Å–∞–º –º—ç—Ç—á–∏—Ç –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≤–ø–∞–¥–∞—é—Ç –ø–æ –∏–º–µ–Ω–∏, –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ üëç

---

–ó–≤—ë–∑–¥–æ—á–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö - —Å –ø–æ–º–æ—â—å—é –Ω–∏—Ö –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –±—ã—Å—Ç—Ä—É—é –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é:
```python
list1 = [1,2,3,4]
list2 = ['a', 'b', 'c', 'd']

list3 = [*list1, *list2] # list3 == [1,2,3,4,'a','b','c','d']
```
 
 –¢–∞–∫–∂–µ —Å –ø–æ–º–æ—â—å—é —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –º–∞—Å—Å–∏–≤–∞ –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å "–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ" –∞—Ä–≥—É–º–µ–Ω—Ç—ã/–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
 ```Python
def func(add_parameter = False):
	result = [1,2,3, *(['param1', 'param2'] if add_parameter else [])]
	return result
# –≤–µ—Ä–Ω—ë—Ç [1,2,3] –∏–ª–∏ [1,2,3,'param1','param2']
```

–ü—Ä–∏ —ç—Ç–æ–º –≤–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å —á—Ç–æ `*` —ç—Ç–æ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Å–ø–∏—Å–∫–æ–≤, –∞ `**` —ç—Ç–æ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Å–ª–æ–≤–∞—Ä–µ–π, –∏ —ç—Ç–æ –æ–ø—è—Ç—å –∂–µ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏

---
&nbsp;
## [[AIM Python#^988180|Iterable protocol]]

^53b053

–ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –¥–ª—è `iterable` –æ–±—ä–µ–∫—Ç–æ–≤ –º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª for. –ù–æ —á–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è —ç—Ç–æ—Ç —Ç–∏–ø –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?
```Python
for value in iterable:
	...
```
 –≠—Ç–æ—Ç –∫–æ–¥ - –ø—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –≤–æ–∫—Ä—É–≥ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
```Python
iterator = iter(iterable)

while True:
	try:
		value = next(iterator)
	except StopIteration:
		break
```

–§–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≥–ª–∞—Å–∏—Ç, —á—Ç–æ —É –Ω–∞—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –º–∞–≥–∏—á–µ—Å–∫–∏–π **dunder-–º–µ—Ç–æ–¥** (double underscore) `__iter__`
```Python
class MyIterable:
	def __iter__(self): -> Iterator # –ø–æ–ª—É—á–∏—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä
```

> - –¢–µ–ø–µ—Ä—å `iter(MyIterable)` —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ `MyIterable.__iter__()`
> - –ó–∞–º–µ—Ç–∏–º, —á—Ç–æ –Ω–∞–±–æ—Ä dunder-–º–µ—Ç–æ–¥–æ–º —Å—Ç—Ä–æ–≥–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∏ –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–≤–æ—ë –Ω–µ–ª—å–∑—è

---
–ê –≤ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –¥—Ä—É–≥–∏–µ dunder-–º–µ—Ç–æ–¥—ã:
```Python
class Iterator:
	def __next__(self) -> data_type
	def __iter__(self) -> copy_of_itself
```
> - –¢–µ–ø–µ—Ä—å `next(Iterator)` —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ `iterator.__next__()`

–ü–æ–ª—É—á–∞–µ—Ç—Å—è —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç - –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∏—Ç–µ—Ä–∞—Ü–∏–µ–π –Ω–µ –æ–±—ä–µ–∫—Ç, –∞ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π –∏–º  –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –∫–ª–∞—Å—Å–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤.

–ù–æ –∑–∞—á–µ–º –Ω–∞–º —É—Å–ª–æ–∂–Ω—è—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –∏ –≤–≤–æ–¥–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å? –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –∏—Ç–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å–∞–º–æ–º –∫–ª–∞—Å—Å–µ:
```Python
class MyList:
	def __next__(self):
		self.iteration_index += 1
		return self.data[self.iteration_index]
```

–¢–æ–≥–¥–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —ç—Ç–æ–≥–æ –∫–æ–¥–∞:
```Python
for i in MyList:
	for j in MyList:
		...
```
–ù–∞—á–Ω—ë—Ç—Å—è –∫–∞—à–∞ —Å `iteration_index`. –ü–æ—ç—Ç–æ–º—É –Ω–∞–º –Ω–µ–ª—å–∑—è —á—Ç–æ–±—ã –≤–æ-–ø–µ—Ä–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–∏–ª–æ—Å—å –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —ç–∫–∑–µ–º–ª—è—Ä–µ, –∞ –≤–æ-–≤—Ç–æ—Ä—ã—Ö —á—Ç–æ–±—ã –∫ –Ω–µ–º—É –∏–º–µ–ª–∏ –¥–æ—Å—Ç—É–ø –≤—Å–µ –∏ —Å—Ä–∞–∑—É.

–í—Å–µ —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞—é—Ç—Å—è –≤–≤–µ–¥–µ–Ω–∏–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ "—ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏—Ç–µ—Ä–∞—Ü–∏–∏", –∫–æ—Ç–æ—Ä—ã–º –∏ —è–≤–ª—è–µ—Ç—Å—è `Iterator`

–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å - –∑–∞—á–µ–º –≤ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–µ –Ω—É–∂–µ–Ω –º–µ—Ç–æ–¥ `__iter__`? –ü–æ—Ç–æ–º—É —á—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ö–æ—Ç–µ–ª–∏, —á—Ç–æ–±—ã –∏ —Å–∞–º–∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Ü–∏–∫–ª–µ `for`. –ù–æ –µ—Å–ª–∏ –º—ã –≤–æ–∑—å–º–µ–º –∏—Ç–∞—Ä–∞—Ç–æ—Ä –æ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞, –æ–Ω –≤–µ—Ä–Ω–µ—Ç —Å–µ–±—è.

---
&nbsp;
## [[AIM Python#^988180|Generator]]

^da519c

–ú—É—Ç–æ—Ä–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø–∏—Å–∞—Ç—å –≤—Å–µ dunder-–º–µ—Ç–æ–¥—ã, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –æ–±—ä–µ–∫—Ç –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–º. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```Python
def func(): # –æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
	return 5

def gen(): # –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
	yield 5 
```
–ß—Ç–æ —Ç–∞–∫–æ–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä? –≠—Ç–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –æ—Å–æ–±–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –∫–æ–º–∞–Ω–¥–∞ `yield` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `return`, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑.
```Python
def gen():
	print("before")
	yield 1
	print("after")
	yield 2
	print("last")
	yield 3

for element in gen:
	print(el)

# > before
# > 1
# > after
# > 2
# > last
# > 3
```

> - –¢–æ –µ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞, –∏ –º—ã –º–æ–∂–µ–º –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–µ–π –µ—â–µ —Ä–∞–∑ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
>   
>  - –ü–æ —Å—É—Ç–∏ —ç—Ç–æ —Å–Ω–æ–≤–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –Ω–∞–¥ —Ç–µ–º, —á—Ç–æ –º—ã –ø–∏—Å–∞–ª–∏ –≤—ã—à–µ. –ü—Ä–æ—Å—Ç–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å —ç—Ç–æ –≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ
>  
>  - –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Ç–µ—Ä–∏—Ä—É–µ–º–∞—è, –∏ —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –Ω–µ–µ –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `yield`


–ê —á—Ç–æ –µ—Å–ª–∏ –º—ã –∑–∞—Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å `yield` –≤–Ω—É—Ç—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `__iter__` –∏—Ç–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞? –í—Å—ë –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ üëç
```Python
class MyIterable:
	def __iter__(self) # –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä
		yield 1
		yield 2
```
> - –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `__iter__` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä —Å –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–º –Ω–∞–º–∏ —Ç–µ–ª–æ–º (—á–∏—Ç–∞–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä). –£ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Ç–æ–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –º–µ—Ç–æ–¥ `__next__` - —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º `yield`-–æ–º –æ–±—ä–µ–∫—Ç - –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –∏ –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å
> 
> - –í —Ç–µ–∫—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ `__iter__` - —ç—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è. –¢–æ –µ—Å—Ç—å —Ç–∞–∫–∞—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–∞—Ä–∞—â–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä

---

### –ü—Ä–∏–º–µ—Ä
–í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ `itertools` –µ—Å—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `chain`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–º –æ–±—ä–µ–∫—Ç–∞–º
```Python
from itertools import chain
chain(a,b,c,...)
```
–ö–æ–¥, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —ç—Ç—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫-—Ç–æ —Ç–∞–∫:
```Python
class MyChain:
	def __init__(self, *iterables):
		self._iterables = iterables
	def __iter__(self):
		for iterable in self._iterables:
			for value in iterable:
				yield value
```
–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã—Ç–≤–æ—Ä—è—Ç—å —Ç–∞–∫–∏–µ —à—Ç—É–∫–∏:
```Python
for value in MyChain([1,2,3], 'abc', [7,8,9]):
	print(value)
	
# > 1 2 3 a b c 7 8 9
```

---

–¢–∞–∫–∂–µ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```Python
for value in iterable:
	tield value
```

–ü—Ä–∏–¥—É–º–∞–ª–∏ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø–∏—Å–∏
```Python
yield from iterable
```

–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω—É–∂–Ω–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

---
&nbsp;
## [[AIM Python#^988180|–ü—Ä–æ–≤–µ—Ä–∫–∞]]

^361826

–ö–∞–∫ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–≤–æ–π –æ–±—ä–µ–∫—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Ç–µ—Ä–∞–±–µ–ª–µ–Ω?

–ï—Å—Ç—å `collections.abc` (abstract based classes), –≤ –∫–æ—Ç–æ—Ä–æ–π –ª–µ–∂–∏—Ç –∏ `Iterable`. –ú–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å –¥–ª—è –Ω–µ–≥–æ `isinstance`

```Python
from collections.abc import Iterable

class  MyIterable:
	...

class TrueIterable:
	def __iter__(self):
		yield 1
	
isinstance(MyIterable, Iterable) # > False
isinstance(TrueIterable, Iterable) # > True
```
–ù–æ –µ—Å—Ç—å —Å–ø–æ—Å–æ–± –Ω–∞–¥–µ–∂–Ω–µ–µ. –ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç –æ–±—ä–µ–∫—Ç–∞ –Ω–∞—à–µ–≥–æ —Ç–∏–ø–∞,  –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –Ω–∞—Ä—É–≥–∞–µ—Ç—Å—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å—É–≥—É–±–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ `__iter__`
```Python
MyIterable() # Error
```

---
&nbsp;
## [[AIM Python#^988180|–õ–µ–Ω–∏–≤—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã]]
–ï—Å–ª–∏ –º—ã –∏—Ç–µ—Ä–∏—Ä—É–µ–º—Å—è –ø–æ —Å–ø–∏—Å–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –∏—Ç–µ—Ä–∞—Ü–∏—è –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π
```Python
l = [1,2,3,4]

for element in l:
	print(l)
for element in l:
	print(l)

# > 1 2 3 4 1 2 3 4
```
 –ù–æ –≤ –ø–∏—Ç–æ–Ω–µ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `map` –∏ `filter`
 > - `map` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –∏—Ç–µ—Ä–∞–±–µ–ª—å–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É
```Python
iterable = map(lambda x: x*x, l)
```
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å `map` –≤ —Ç–æ–º, —á—Ç–æ –µ–µ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ–¥–∏–Ω–æ–∂–¥—ã
```Python
list(iterable) # > [1, 4, 9, 16]
list(iterable) # > []
```
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –±—ã–≤–∞—é—Ç –ª–µ–Ω–∏–≤—ã–º–∏ –∏ –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤—ã–∑–æ–≤ –≤—Ç–æ—Ä–æ–π —Ä–∞–∑

---

### try/except
–ï—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á, –≥–¥–µ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–¥–∞—Ç—å –Ω–∞–∑–∞–¥ –∏–ª–∏ —É—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–∫—Ä—ã—Ç—ã–π —Ñ–∞–π–ª, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å)

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ —Ñ–∞–π–ª–æ–º:
```Python
class FileWrapper():
	def __init__(self, path, mode = 'rt'):
		self._file = open(path, mode)
		
	def read(self, size = -1, /):
		return self._file.read(size)
	
	def readline(self):
		return self._file.readline()
	
	def close(self):
		self._file(close)
	
	def __iter__(self):
		line = self.readline()
		while line:
			yield line
			line = self.readline()
```
–≠—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏ –≤ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–æ–º —Ñ–∞–π–ª –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.

---

–ù–∞–ø–∏—à–µ–º –≤ –∫–ª–∞—Å—Å–µ —Å—Ä–µ–¥–∏ –ø—Ä–æ—á–µ–≥–æ "–æ–±—Ä–∞–±–æ—Ç—á–∏–∫" —Ñ—É–Ω–∫—Ü–∏–∏ —á—Ç–µ–Ω–∏—è:
 ```Python
class FileWrapper():
	def __init__(self, path, mode = 'rt'):
		self._file = open(path, mode)
		self._read_cnt = 0 # –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–ª–µ
		
	def _on_read(self): # –¥–æ–±–∞–≤–∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
		self._read_cnt += 1
		if self._read_cnt >= 2:
			raise ValueError("too much")
		
	def read(self, size = -1, /):
		self._on_read() # –≤—ã–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –∫–∞–∂–¥—É—é –ø–æ–ø—ã—Ç–∫—É —á—Ç–µ–Ω–∏—è
 		return self._file.read(size)
	
	def readline(self):
		return self._file.readline()
	
	def close(self):
		self._file(close)	
		
	def __iter__(self):
		line = self.readline()
		while line:
			yield line
			line = self.readline()
 ```
–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –±—É–¥–µ—Ç –ø—Ä–æ—á—Ç–µ–Ω–∞ –≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞, –≤—ã–ª–µ–∑–µ—Ç –æ—à–∏–±–∫–∞.

---

–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –Ω–∞—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–¥–∞–ª–∞ –Ω–∞–º –æ—à–∏–±–∫—É –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–∫—Ä—ã–ª–∞—Å—å –¥–æ—Å—Ä–æ—á–Ω–æ? –û–±–º–∞–∑–∞—Ç—å—Å—è `try / except`
```Python
f = FileWrapper('./file.txt')
try:
	for line in f:
		pass
finally:
	f.close()		
```
–¢–µ–ø–µ—Ä—å –Ω–∞—à —Ñ–∞–π–ª –∑–∞–∫—Ä–æ–µ—Ç—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ üëç

---

### –ú–∏–Ω—É—Å—ã try/except
–ù–∞–ø–∏—à–µ–º –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–¥–µ–ª—è—é—â–∏–π –¥–≤–∞ —Ä–µ—Å—É—Ä—Å–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—â–∏–π –Ω–∞–º, —á—Ç–æ —ç—Ç–∏ —Ä–µ—Å—É—Ä—Å—ã –±—É–¥—É—Ç –∑–∞–∫—Ä—ã—Ç—ã
```Python
def some_generator():
	resource = SomeResource()
	try:
		yield from source1
		resource2 = SomeResource2()
		try:
			yield from list('abcdef')
		finally:
			resource2.close()
	finally:
		resource.close()		
```

–£–¥–æ–±–Ω–µ–µ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–π –∫–æ–ª–±–∞—Å—ã –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Å `with`
```Python
def some_generator():
	with SomeResource() as resourcs:
		yield from source1
		
		with SomeResource2() as resource2:
			yield from list('abcdef')
```

> ‚òù   –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
> 
> ---
> 
> –ü—Ä–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ 
> ```Python
> with obj as value:
>	 somecode
> ```
> –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏:
> - `value = obj.__enter__()`
> - `somecode`
> - `value.__exit__()`
> 
> `__enter__` –∏ `__exit__` - –º–∞–≥–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –æ–±—ä–µ–∫—Ç–∞. –≠—Ç–∏ –º–µ—Ç–æ–¥—ã –ø—Ä–∏—Å—É—â–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º

---
&nbsp;
## [[AIM Python#Content|Context Manager]]

–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–ª–∞—Å—Å, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã
```Python
def MyContextManager:
	def __enter__(self):
		print('Enter')
		return ('Hello')
	def __exit__((self, exc_type, exc_value, traceback): pass
		print('Exit')
		return( locals())
```
> - `enter` –∏ `exit` –≤—ã–∑—ã–≤–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ –º—ã –∑–∞—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `with` –∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –≤—ã—Ö–æ–¥–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–æ–∑–º–æ–∂–Ω–æ–π –æ—à–∏–±–∫–µ, –∫–æ—Ç–æ—Ä—É—é –¥–∞–ª–µ–µ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å
> 
> - –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `__exit__` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç—å. –ï—Å–ª–∏ –º—ã –∑–∞—Ö–æ—Ç–∏–º –≤–µ—Ä–Ω—É—Ç—å `False` –∏–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–µ—Ä–Ω—É—Ç—å, –≤—ã–¥–∞—Å—Ç—Å—è –æ—à–∏–±–∫–∞

–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∫–æ–¥:
```Python
with MyContextMamager() as value:
	print('value = ', value)
	
# Enter
# value = Hello
# Exit
# {'self': <__main__.MyContextManager object at 0x7asdf9282>, 'exc_type':None, 'exc_value':None, 'traceback':None}
```
> -  –í `exit` –Ω–∏—á–µ–≥–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–ª–æ—Å—å (–≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–≤–Ω—ã `None`), –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –≤—ã–ø–∞–ª–∞ –Ω–∏–∫–∞–∫–∞—è –æ—à–∏–±–∫–∞

---

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- –§–∞–π–ª—ã

```Python
data  = open('./file.txt').read() # BAD

with open('./file.t xt') as f: #‚úîÔ∏è
	data = f.read()
```

- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞—Ö–æ—Ç–µ–ª–∏ –ø–æ—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã)
```Python
with object.SOME_LONG_WORK.measure(): # GOOD
	blabla
	
object.SOME_LONG_WORK.update_time()
```

- –í —Ü–µ–ª–æ–º, –ª—é–±—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç–æ—á–∫—É –≤—ã–≤–æ–¥–∞, –≥–¥–µ –Ω–∞–¥–æ –ª–∏–±–æ –ø–æ–¥–≤–µ—Å—Ç–∏ –∏—Ç–æ–≥–∏, –ª–∏–±–æ —á—Ç–æ-—Ç–æ –æ–º–µ–Ω–∏—Ç—å, —É–¥–æ–±–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º

---
&nbsp;
## [[AIM Python#Content|Testing]]


–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤:

> -  ```unit test``` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –±–ª–æ–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã
> -  ```integration test``` -  –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–ª–æ–∫–æ–≤ –≤ —Å–≤—è–∑–∫–µ
> - ```end-to-end``` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ

 –í –ø–∏—Ç–æ–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—à–∏—Ç—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤ (–≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å, –Ω–æ —Ç–æ–ø–æ—Ä–Ω—ã–π) –∏ ```pytest```, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –æ–±—ä–µ–º —Ä–∞–±–æ—Ç—ã
 
 –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã ```pytest PATH``` –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏—â—É—Ç—Å—è –ø–∏—Ç–æ–Ω—è—á—å–∏ —Ñ–∞–π–ª—ã —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º ```test_*.py```.
 
 –¢–µ—Å—Ç–æ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è –ª—é–±–æ–π –∫–ª–∞—Å—Å, –Ω–∞–∑—ã–≤–∞—é—â–∏–π—Å—è ```class Test*``` –∏ –ª—é–±–∞—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –Ω–∞—á–∏–Ω–∞—é—â–∞–π—Å—è –Ω–∞ ```def test_*```  (–≤ –∫–ª–∞—Å—Å–µ —Ç–æ–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∞ —Ç–µ—Å—Ç–∏—Ä—É—é—â–∞—è —Ñ—É–Ω–∫–∏—è - —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∫–ª–∞—Å—Å —ç—Ç–æ —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω–∞—è "–ø–∞–ø–∫–∞" –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤)
 
 > -  ```pytest -v PATH``` –≤—ã–≤–µ–¥–µ—Ç –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

&nbsp;



### unittest.mock :

–ü—É—Å—Ç—å —É –Ω–∞—Å –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –∞ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è, –¥–µ–ª–∞—é—â–∞—è —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∏ –µ–µ –º—ã –ø—Ä–æ–≥–æ–Ω—è—Ç—å –Ω–µ —Ö–æ—Ç–∏–º ‚Äì –∫–∞–∫ –Ω–∞–º –±—ã—Ç—å?

```Python

def HARDFUNCTION():
	sleep(999999)
	return 1
	
def important_function():
	result = 0
	try:
		result = HARDFUNCTION()
	except:
		...
	return result

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **mock** (–æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –∑–∞–≥–ª—É—à–∫–∞) –∏ **patch**

```Python
from unittest.mock import mock

m - Mock()
```

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –ª—é–±–æ–≥–æ –µ–µ –ø–æ–ª—è –æ–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤:

```Python
m.blabla
m.blabla.first.second.third

m.f()

m.value = 100500

m.f.call_count # -> 1
```

> üëÜ –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –µ—Å—Ç—å –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö –∫—Ä—É—Ç—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —É –ø–æ–ª–µ–π –º–æ–∫–∞! 

–¢–∞–∫–∂–µ —É –º–æ–∫–∞ –µ—Å—Ç—å –ø–æ–ª–µ ```return_value```, –∫–æ—Ç–æ—Ä–æ–µ –æ–Ω –≤–µ—Ä–Ω–µ—Ç, –ø—Ä–∏ –≤—ã–∑–æ–≤–µ, –∏ –∞—Ç—Ä–∏–±—É—Ç ```side_effect()```, –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å exception, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–∏–ª–∏ –¥–∞–∂–µ –∏—Ç–µ—Ä–∞–±–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∑–Ω–∞—á–µ–Ω–∏—è / –æ—à–∏–±–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É)

–ó–¥–µ—Å—å –≤–∞–∂–Ω–æ, —á—Ç–æ –≤ ```return_value``` –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –∑–∞—Ä–µ–π–∑–∏—Ç—å –æ—à–∏–±–∫—É –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ ‚Äì —ç—Ç–æ –æ–±—ã—á–Ω–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

&nbsp;

–ï—Å–ª–∏ mock —É–∂–µ –ø–æ–∂–∏–≤—à–∏–π, –∞ –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∑–∞–Ω–æ–≤–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ```m.reset_mock()``` ‚Äì –º–µ—Ç–æ–¥ —É–¥–∞–ª–∏—Ç –≤—Å–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏ –∏ –∑–∞–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

&nbsp;


### patch

**patch** ‚Äì —ç—Ç–æ –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –¥–æ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ```"__main__.HARDFUNCTION"```) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–∫.

–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–º–µ—Å—Ç–æ ```HARDFUNCTION``` –º–æ–∫ :
```Python
from unittest.mock import patch 

with patch("__main__.HARDFUNCTION") as m:
	value = 10
	m.return_value = data
	assert important_function() == 10

```

–¢–∞–∫–∂–µ –ø–∞—Ç—á –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω –∫–∞–∫ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –∫ —Ç–µ—Å—Ç–∏—Ä—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ :
```Python
@patch("__main__.HARDFUNCTION")
def test(m):
	m.return_value = 666
	...
```

–ó–∞–º–µ—Ç–∏–º, —á—Ç–æ –ø–æ–¥–º–µ–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (–∏–ª–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞, –∫–∞–∫ —É–≤–∏–¥–∏–º –ø–æ–∑–¥–Ω–µ–µ) ‚Äì –≤–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö —Ñ—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç–æ–π

---
&nbsp;
## [[AIM Python#Content|Decorator]]

–°–º–æ–¥–µ–ª–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä: –ø—É—Å—Ç—å –º—ã —Ö–æ—Ç–∏–º –∑–∞–º–µ—Ä—è—Ç—å –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–æ–≥–¥–∞:

```Python
import time

def some_long_operation(): # –Ω–∞—à–∞ –¥–æ–ª–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
	start_time = time.time()
	time.sleep(3)
	end_time = time.time()
	print("duration is", end_time - start_time)
```

–ù–æ –º—ã –∂–µ –Ω–µ –±—É–¥–µ–º –∫–∞–∂–¥—ã–π —Ä–∞–∑ –¥–æ–ø–∏—Å—ã–≤–∞—Ç—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏ –æ–±—ä—è–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏. –ù–∞–¥–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –æ–±—ë—Ä—Ç–∫—É, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç—å:

```Python
def timeit(func, *args, **kwargs):
	start_time = time.time()

	func(*args, **kwargs)
	
	end_time = time.time()
	print("duration is", end_time - start_time)

-> timeit(some_long_operation, 5)	
```

–°–∏–º–ø–∞—Ç–∏—á–Ω–æ. –ù–æ –º—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤–æ–∑–∏—Ç—å—Å—è —Å timeit.
–û–¥–Ω–∏–º –∏–∑ —Ä–µ—à–µ–Ω–∏–π –±—É–¥–µ—Ç:
```Python
def timeit(func, *args, **kwargs):
	def wrapper():
		start_time = time.time()

		result = func(*args, **kwargs)

		end_time = time.time()
		print("duration is", end_time - start_time)
		return result
	return wrapper

# —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ç–∞–∫
-> some_long_function = timeit(some_long_function, 5)
```

–ù–æ —Ç–µ–ø–µ—Ä—å —É —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∞—Ä–≥—É–º–µ–Ω—Ç—ã. –¢–µ–ø–µ—Ä—å –¥–µ–ª–∞–µ–º —Ç–∞–∫:
```Python
def timeit(func):
	def wrapper(*args, **kwargs):
		start_time = time.time()

		result = func(*args, **kwargs)

		end_time = time.time()
		print("duration is", end_time - start_time)
		return result
	return wrapper

# –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ —É–º–µ–µ–º –¥–µ–ª–∞—Ç—å —Ç–∞–∫
-> some_long_function = timeit(some_long_function)
```

–¢–µ–ø–µ—Ä—å –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –∫—Ä–∞—Å–æ—Ç–µ. –ò–º–µ–Ω–Ω–æ –Ω–∞–¥ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—Ä–æ–π –∏ –µ—Å—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –≤ –≤–∏–¥–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞:

```Python
@timeit
def some_long_function():
	...

# —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ

some_long_function = timeit(some_long_function) 
#, –≥–¥–µ timeit –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–µ –æ–±–µ—Ä–Ω—É—Ç—É—é –≤–µ—Ä—Å–∏—é 
```
&nbsp;

> ### ‚òù –ó–∞–º–µ—á–∞–Ω–∏–µ :
> 
> –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö, –æ–±–æ—Ä–∞—á–∏–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—é –≤—Å—ë –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:
> ```Python
> @last_decorator
> @mid_decorator
> @first_decorator
> def f(x):
> 	pass
> ```

&nbsp;

–ë–ª–∞–≥–æ–¥–∞—Ä—è –≥–∏–±–∫–æ—Å—Ç–∏ –ø–∏—Ç–æ–Ω–∞ –º—ã –º–æ–∂–µ–º —Ä–∞–∑–≤–∏—Ç—å –∏–¥–µ—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –∏ —Å–¥–µ–ª–∞—Ç—å –µ–µ –±–æ–ª–µ–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π - –≤–µ–¥—å –ø–æ —Å—É—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –ø–æ–ª—É—á–∞—é—â–∏–π –Ω–∞ –≤—Ö–æ–¥ —á—Ç–æ-—Ç–æ (–∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–æ —á—Ç–æ —ç—Ç–æ callable –æ–±—ä–µ–∫—Ç –æ—Ç –æ–¥–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞) –∏ –≤–æ–∑—Ä–∞—â–∞—é—â–∏–π —á—Ç–æ-—Ç–æ. –ü–æ–ø—Ä–æ–±—É–µ–º –∑–∞–ø–∏—Å–∞—Ç—å —ç—Ç–æ –≤ –≤–∏–¥–µ –∫–ª–∞—Å—Å–∞:

```Python
class timeit:
	def __init__(self, func): # timeit(func)
		self._func = func
		
	def __call__(self, *args, **kwargs):
		start_time = time.time()
		
		result = self._func(*args, **kwargs)
		
		end_time = time.time()
		print("duration is", end_time - start_time)
		
		return result
		
# –¢–µ–ø–µ—Ä—å –æ–ø—è—Ç—å –∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
@timeit
def f(x):
	pass
```

–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞? –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–∫–Ω—Ü–∏—é, –∞ –≤ –∫–∞–∫–∏—Ö –∫–ª–∞—Å—Å? –ü–µ—Ä–≤–∞—è –æ—á–µ–≤–∏–¥–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –≤ —Å–µ–±–µ –≤—Å—é –ª–æ–≥–∏–∫—É –∏ –ø–æ–ª—è, –∏ –∫ –µ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –ø–æ–ª—è–º –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è (—É —Ñ—É–Ω–∫—Ü–∏–∏ —Å–≤–æ—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏), –∞ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å.

–ú—ã –º–æ–∂–µ–º –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –∏ –∫–ª–∞—Å—Å—ã (–∞ –ø–æ—á–µ–º—É –Ω–µ—Ç?). –ù–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–æ–ª–∂–Ω—ã –∫–ª–∞—Å—Å:
```Python
def set_field(cls):
	cls.field = 0
	return cls # <-- –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞—Å—Å
	
@set_field
class foo:
	...

# –¢–µ–ø–µ—Ä—å –≤ –∫–ª–∞—Å—Å–µ –µ—Å—Ç—å –ø–æ–ª–µ field = 0 
```

&nbsp;


> ### Dataclasses :
> –ü—É—Å—Ç—å –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ –∫–ª–∞—Å—Å "—Ö—Ä–∞–Ω–∏–ª–∫–∞" –∏–º–µ—é—â–∏–π —Ç–æ–ª—å–∫–æ –ø–æ–ª—è –∏ –Ω–µ –∏–º–µ–µ—Ç —Ñ—É–Ω–∫—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å—Ç—É–¥–µ–Ω—Ç —Å –∏–º–µ–Ω–µ–º, —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º –∏ –≥—Ä—É–ø–ø–æ–π ü§™). 
> 
> –î–ª—è —Ç–∞–∫–æ–π –º–µ–ª–æ—á–∏ –Ω–∞–º –ª–µ–Ω—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–ª—è –Ω–µ–≥–æ ```__str__```, ```__repr__```, ```__eq__``` –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ dataclasses:
> 
> ```Python
> import dataclasses
> 
> @dataclasses.dataclass
> class Student:
> 	name: str = ""
> 	phone: int = 0
> 	group: int = 0
> ```
> 
> –ü–æ —Å—É—Ç–∏ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º —ç—Ç–æ–≥–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –ª–µ–∂–∏—Ç —á—Ç–æ-—Ç–æ —Ç–∞–∫–æ–µ:
> ```Python
> def dataclass(cls):
> 	def __init__(self, *args, **kwargs):
> 		# –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º–∞–≥–∏—è
> 	
> 	cls.__init__ = __init__
> 	
> 	return class
> ```
> 
> –¢–æ –µ—Å—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∞—Å—Å–∞

&nbsp;


–°—É—â–µ—Å—Ç–≤—É—é—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, –Ω–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –ª–∏—à—å —Ç–æ, —á—Ç–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –µ–≥–æ –∫–∞–∫ –æ–±–æ–ª–æ—á–∫–∏ –º—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –µ–º—É –∫–∞–∫–∏–µ-—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã:
```Python
@deco(arg = 1)
def func():
	...
	
# —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ
func = deco(arg = 1)(func)
```

&nbsp;


> ###  Staticmethod, classmethod :
> 
> –° –ø–æ–º–æ—â—å—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ ```@staticmethod``` –ª—é–±–æ–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ (–∏ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª–∞—Å—Å–∞, –∏ –∫–∞–∫ –º–µ—Ç–æ–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è) –±—É–¥–µ—Ç –∏–¥—Ç–∏ –≤–º–µ—Å—Ç–µ —Å  –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º ```self```
> 
> –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, —Å –ø–æ–º–æ—â—å—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ ```@classmethod``` –ª—é–±–æ–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ (–∏ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª–∞—Å—Å–∞, –∏ –∫–∞–∫ –º–µ—Ç–æ–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è) –±—É–¥–µ—Ç –∏–¥—Ç–∏ –≤–º–µ—Å—Ç–µ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º ```self```
> 
> –ó–∞–º–µ—Ç–∏–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ```@staticmethod``` –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–∞—á–∞—Å—Ç—É—é –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞ –Ω–µ—Ç-–Ω–µ—Ç –¥–∞ –∏ –ø—Ä–∏–≥–æ–∂–¥–∞—é—Ç—Å—è.
>
> - –ó–∞–º–µ—Ç–∏–º –æ—á–µ–≤–∏–¥–Ω–æ–µ: ```@classmethod``` –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å ```@staticmethod```, –Ω–æ –Ω–µ –Ω–∞–æ–±—Ä–æ—Ç  

&nbsp;


–ï—Å—Ç—å –µ—â–µ –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ ‚Äì –∫–æ–≥–¥–∞ –º—ã –æ–±—ä—è–≤–ª—è–µ–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, —Ç–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö –∏—Å—Ö–æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —É –Ω–∞—Å –∏–º–µ—é—Ç—Å—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ–±—ë—Ä—Ç–∫–∏

```Python
def decorator(func):
	def wrapper(*args, **kwargs):
		print('starting')
		return func(*args, **kwargs)
	return wrapper
	
def func(x):
	'''This function is cool'''
	print(x)

help(func) # -> func, "This function is cool"
help(decorator(func)) # wrapper, ""
```
 
–ü–æ—ç—Ç–æ–º—É –Ω–∞–¥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –≤ ```functools``` –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º ```wraps```:

```Python
import functools

def decorator(func):
	@functools.wraps(func) # –∑–∞—Å—É–Ω—É—Ç—å –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ wrapper –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ func
	def wrapper(*args, **kwargs):
		print('starting')
		return func(*args, **kwargs)
	return wrapper
	
def func(x):
	'''This function is cool'''
	print(x)

help(func) # -> func, "This function is cool"
help(decorator(func)) # func, "This function is cool"
```
