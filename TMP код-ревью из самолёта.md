## gribov tests

![[Pasted image 20240913130736.png]]
>[!quote] 
>Надо переделать концепцию метрики. Подвязать под BaseMetric — это отдельная задача

## Add trainers etc.

![[Pasted image 20240913130959.png]]
>[!quote]
>Почему конфиг pre-commit? Сначала разобраться самому, потом спросить Санджара

  
![[Pasted image 20240913131132.png]]
  >[!quote] 
  >По идее модель ничего не должна знать про логгер, это не её область ответственности. Логгер выбирается на этапе конструирования пайплайна.
  >Также надо подумать над более универсальной папкой, чем твой хомяк. Либо подтягивать текущую директорию пользователя, либо сохранять всегда в независимую от пользователя папку
  >
  
![[Pasted image 20240913131619.png]]
 >[!quote]
  > Что такое train_dataset? Датасет, на котором предобучалась модель с нашими весами? Тогда боюсь у нас будут не все такие датасеты в директории. Кажется что это что-то другое
  > 
  > Что такое valid_dataset? Пример датасета, на котором модель даёт адекватное качество?
  > 
  > Что такое train_dataset? Что такое example dataset?
  > 
  > Туда же: почему модель сама выбирает, какой у неё device? Это же тоже не её ответственность.

![[Pasted image 20240913132319.png]]
>[!quote]
>Про метрики та же история — по идее это не забота модели

![[Pasted image 20240913132431.png]]
>[!quote]
>По идее частота логирования и валидации это тоже не ответстветнность модели. Но мб пока стоит и так оставить. В конечном счёте у нас по-хорошему должен быть конфиг для датасета и трейнера отдельно


![[Pasted image 20240913133209.png]]
>[!quote]
> Опять же, мы можем задать collate_fn только зная датасет, который нам дадут, но никак не используя предзаписанный в конфиг модели

![[Pasted image 20240913134011.png]]
>[!quote]
>Разве нам нужно это possibility? Всё равно критерий всегда выполняется

![[Pasted image 20240913134213.png]]
>[!quote]
>Объясни, зачем нам это нужно?

![[Pasted image 20240913134552.png]]
> [!quote]
> Давай уберём у txt логгера печать на экран, это тоже не его ответственность. Пусть лучше этим занимается отдельный тривиальный логгер (условный stdout logger). А я в свою очередь в пайплайне объединю их вывод в один composite-логгер

![[Pasted image 20240913134800.png]]
>[!quote]
>Как будто правильнее прокидывать таску не строкой а enum-ом

![[Pasted image 20240913134942.png]]
>[!quote]
>close не вызывается нигде в классе

![[Pasted image 20240913135257.png]]
>[!quote]
>Давай добавим sanity check проверку с ValueError в случае если smooth вне области возможных значений

![[Pasted image 20240913135549.png]]
>[!quote]
>Тоже было бы неплохо иметь sanity check на параметры

![[Pasted image 20240913135646.png]]
>[!quote]
>Предложение : loss должен знать про тип(ы) задач, к которым он применим. Давай добавим это поле в BaseLoss, а я на этапе проверки пайплайна на всякий буду смотреть, действительно ли метрика подходит под поставленный тип задачи

![[Pasted image 20240913140055.png]]
>[!quote]
>Здесь возникнет доп.трудность в рантайме определять маппинг из той метрики, которую указал пользователь в тот строковый ключ, который эту метрику даёт. Я бы в качестве ключей здесь прямо использовал ENUM-ы, чтобы значение метрики получалось напрямую по ключу, равному требуемой enum-метрике



